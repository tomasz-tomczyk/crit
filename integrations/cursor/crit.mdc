---
description: Plan review workflow with Crit
globs: ["**/*.md"]
---

# Crit - Plan Review Workflow

Before implementing any non-trivial feature, write an implementation plan as a markdown file.

## Writing plans

When asked to implement a feature, first create a plan file that covers:
- What will be built
- Which files will be created or modified
- Key design decisions and trade-offs
- Step-by-step implementation order

## Review with Crit

After writing the plan, launch Crit to open it for review:

```bash
crit $PLAN_FILE
```

Tell the user: "I've opened the plan in Crit for review. Leave inline comments, then click Finish Review. Let me know when you're done."

Do NOT begin implementation until the user confirms the plan is approved.

## After review

Read the `.crit.json` file in the repo root. It contains structured JSON with per-file comments:

```json
{
  "files": {
    "plan.md": {
      "comments": [
        { "id": "c1", "start_line": 5, "end_line": 10, "body": "Clarify this step", "resolved": false }
      ]
    }
  }
}
```

Address each unresolved comment (`"resolved": false`) by revising the original plan file.

After addressing all comments, signal completion:

```bash
crit go <port>
```

The port is shown in crit's startup output. This triggers a new review round with a diff of changes.

Only proceed with implementation after the user approves the final plan.
